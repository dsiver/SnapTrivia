<% current_game = Game.find(params[:game_id]) %>
<% player2 = User.find(current_game.player2_id) %>
<% can_challenge = current_game.can_challenge? %>
<% if current_game.player2.id != current_user.id && current_game.player1_turn == false %>
    <% current_game.player2 == current_game.player1 %>
    <% current_game.player1 == current_user %>
<% end %>

<div class="container">

  <div style="display: none;">
    <p id="game_id"><%= current_game.id %></p>
  </div>


  <% if can_challenge %>

      < class="row">

      <div class="col-sm-3">

        <h3><%= current_user.name %></h3>
        <h4>Trophies</h4>

        <select id="wager" class="form-control">
          <% wagerable_trophies = current_game.get_wagerable_trophies(current_user.id) %>
          <% wagerable_trophies.each do |wager| %>
              <% if wager == 'Art' %>
                  <option value="Art" class="fa fa-paint-brush" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Art
                  </option>
              <% end %>

              <% if wager == 'Entertainment' %>
                  <option value="Entertainment" class="fa fa-film" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Entertainment
                  </option>
              <% end %>

              <% if wager == 'History' %>
                  <option value="History" class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    History
                  </option>
              <% end %>

              <% if wager == 'Geography' %>
                  <option value="Geography" class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Geography
                  </option>
              <% end %>

              <% if wager == 'Science' %>
                  <option value="Science" class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Science
                  </option>
              <% end %>

              <% if wager == 'Sports' %>
                  <option value="Science" class="fa fa-futbol-o" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Sports
                  </option>
              <% end %>
          <% end %>
        </select>

      </div>
      <!-- column end  -->


      <div class="col-sm-3">   <!-- column 2 start -->
        <h3><%= player2.name %></h3>

        <select id="prize" class="form-control">
          <% winnable_trophies = current_game.get_winnable_trophies(player2.id) %>
          <% winnable_trophies.each do |prize| %>
              <% if prize == 'Art' %>
                  <option value="Art" class="fa fa-paint-brush" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Art
                  </option>
              <% end %>

              <% if prize == 'Entertainment' %>
                  <option value="Entertainment" class="fa fa-film" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Entertainment
                  </option>
              <% end %>

              <% if prize == 'History' %>
                  <option value="History" class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    History
                  </option>
              <% end %>

              <% if prize == 'Geography' %>
                  <option value="Geography" class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Geography
                  </option>
              <% end %>

              <% if prize == 'Science' %>
                  <option value="Science" class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Science
                  </option>
              <% end %>

              <% if prize == 'Sports' %>
                  <option value="Science" class="fa fa-futbol-o" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">
                    Sports
                  </option>
              <% end %>
          <% end %>
        </select>

        <button type="button" class="btn btn-large btn-primary" onclick="LaunchChallenge();"> Begin Challenge</button>

        <br/>
      </div>

  <% end %>
</div>

<script>

    function LaunchChallenge() {
        var wager_select = document.getElementById("wager");
        var prize_select = document.getElementById("prize");
        var game_id = document.getElementById("game_id").innerHTML;

        var wager = wager_select.options[wager_select.selectedIndex].value;
        var prize = prize_select.options[prize_select.selectedIndex].value;

        var url = '/game/ask_question?game_id=' + game_id + '&wager=' + wager + "&prize=" + prize;
        Turbolinks.visit(url);
    }

</script>
