<% current_game = Game.find(@game.id) %>
<% player1 = User.find(current_game.player1_id) %>
<% player2 = User.find(current_game.player2_id) %>
<% question_type = 'Standard' %>
<% opponent_id = @game.opponent_id(current_user.id) %>
<% can_challenge = current_game.can_challenge? %>
<% if current_game.player2.id != current_user.id && current_game.player1_turn == false %>
    <% current_game.player2 == current_game.player1 %>
    <% current_game.player1 == current_user %>
<% end %>


<html>

<div style="display: none;">
  <p id="game_id"><%= current_game.id %></p>

  <p id="question_type"><%= question_type %></p>

</div>


<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<meta charset="UTF-8"/>
<title>SnapTrivia</title>
<style type="text/css">
    body {
        background: lightblue;
    }

    #wheelcanvas {
        display: block;
        margin-left: auto;
        margin-right: auto;
    }
</style>


<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <ul class="nav nav-pills nav-justified thumbnail">
        <li class="active"><a href="#">
          <!--  Image should go here  -->

          <h4 class="list-group-item-heading"><%= player1.name %></h4>
          <ul class="fa-ul" id="player1_trophies">
            <p class="list-group-item-text">Turn count = <%= current_game.turn_count.to_s %></p>

            <p class="list-group-item-text">Answer Correct = <%= current_game.answers_correct.to_s %></p>

            <p class="list-group-item-text">Player 1 turn = <%= current_game.player1_turn.to_s %></p>

            <p class="list-group-item-text">Score = <%= player1.score.to_s %></p>

            <p class="list-group-item-text">Level = <%= player1.level.to_s %></p>

            <p class="list-group-item-text">Player1 can_challenge? = <%= current_game.can_challenge? %> </p>

            <p class="list-group-item-text">current_game.challenge = <%= current_game.challenge.to_s %> </p>

            <p class="list-group-item-text">opponent = <%= User.find(opponent_id).name %> </p>

            <p class="list-group-item-text"><%= current_user.name + ' wagerable' %><%= current_game.get_wagerable_trophies(current_user.id) %> </p>

            <p class="list-group-item-text"><%= current_user.name + ' winnable' %><%= current_game.get_winnable_trophies(current_user.id) %> </p>

            <!-- This section will add trophies on the game page -->

            <% if @game.art_trophy_p1? %>
                <li class="fa-stack fa-3x">
                  <i class="fa fa-paint-brush fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.entertainment_trophy_p1? %>
                <li class="fa-stack fa-3x">
                  <i class="fa fa-film fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.history_trophy_p1? %>
                <li class="fa-stack fa-3x">
                  <i class="fa fa-book fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.geography_trophy_p1? %>
                <li class="fa-stack fa-3x">
                  <i class="fa fa-globe fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.science_trophy_p1? %>
                <li class="fa-stack fa-3x">
                  <i class="fa fa-flask fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.sports_trophy_p1? %>
                <li class="fa-stack fa-5x">
                  <i class="fa fa-futbol-o fa-stack-3x"></i>
                </li>
            <% end %>
          </ul>

        </a>
        </li>

        <li class="disabled"><a href="#">

          <!--  Image should go here  -->
          <h4 class="list-group-item-heading"><%= player2.name %></h4>

          <p class="list-group-item-text">Player2 can_challenge? = <%= @game.can_challenge? %></p>


          <ul class="fa-ul" id="player2_trophies">
            <% if @game.art_trophy_p2? %>
                <li class="fa-stack fa-5x">
                  <i class="fa fa-paint-brush fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.entertainment_trophy_p2? %>
                <li class="fa-stack fa-5x">
                  <i class="fa fa-film fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.history_trophy_p2? %>
                <li class="fa-stack fa-5x">
                  <i class="fa fa-book fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.geography_trophy_p2? %>
                <li class="fa-stack fa-5x">
                  <i class="fa fa-globe fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.science_trophy_p2? %>
                <li class="fa-stack fa-5x">
                  <i class="fa flask fa-stack-5x"></i>
                </li>
            <% end %>
            <% if @game.sports_trophy_p2? %>
                <li class="fa-stack fa-5x">
                  <i class="fa fa-futbol-o fa-stack-5x"></i>
                </li>
            <% end %>
          </ul>

        </a></li>
      </ul>

      <!-- End trophy addition -->


    </div>
  </div>
</div>

<!-- Subject Modal   -->
<div class="container">
  <div class="modal fade" id="select_subject" tabindex="-1" role="dialog" aria-labelledby="subject_modal_label" aria-hidden="true" data-backdrop="static" data-keyboard="false">

    <div class="modal-dialog">
      <div class="modal-content " style="width: 182px; border: 2px solid darkblue; margin-left: auto; margin-right: auto; margin-top: 15%; ">


        <h3 style="margin-left: 10px;">Pick a Subject</h3>

        <% @game.get_available_trophies(current_user.id).each do |prize| %>
            <p>Game ID = <%= current_game.id  %></p>
            <% if prize == 'Art' %>
                <%= link_to game_ask_question_path(:subject => 'Art', :game_id => current_game.id, :bonus => 'true'), class:'btn btn-large btn-primary', title:'Art' do  %>
                    <i class="fa fa-paint-brush" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">  Art</i>
                <% end %>
            <% end %>
            <% if prize == 'Entertainment' %>
                <%= link_to game_ask_question_path(:subject => 'Entertainment', :game_id => current_game.id, :bonus => 'true'), class:'btn btn-large  btn-primary', title:'Entertainment' do  %>
                    <i class="fa fa-film" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">  Entertainment</i>
                <% end %>
            <% end %>
            <% if prize == 'History' %>
                <%= link_to game_ask_question_path(:subject => 'History', :game_id => current_game.id, :bonus => 'true'), class:'btn btn-large btn-primary', title:'History' do  %>
                    <i class="fa fa-book" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">  History</i>
                <% end %>
            <% end %>
            <% if prize == 'Geography' %>
                <%= link_to game_ask_question_path(:subject => 'Geography', :game_id => current_game.id, :bonus => 'true'), class:'btn btn-large btn-primary', title:'Geography' do  %>
                    <i class="fa fa-globe" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">  Geography</i>
                <% end %>
            <% end %>
            <% if prize == 'Science' %>
                <%= link_to game_ask_question_path(:subject => 'Science', :game_id => current_game.id, :bonus => 'true'), class:'btn btn-large btn-primary', title:'Science' do  %>
                    <i class="fa fa-flask" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">  Science</i>
                <% end %>
            <% end %>
            <% if prize == 'Sports' %>
                <%= link_to game_ask_question_path(:subject => 'Sports', :game_id => current_game.id, :bonus => 'true'), class:'btn btn-large btn-primary', title:'Sports' do  %>
                    <i class="fa fa-futbol-o" style="width: 150px; margin-left: 2px; margin-bottom: 2px;">  Sports</i>
                <% end %>
            <% end %>
        <% end %>
        <% if can_challenge %>
            <a class="btn btn-large btn-primary" style="width: 150px; background-color: red; color: #ffffff; margin-bottom: 1px; margin-left: 5px; margin-right: 5px;" href="#" onclick="LaunchChallenge()"> Challenge </a>
        <% end %>
        <!--        -->

      </div>
    </div>
  </div>
</div>

<div>
  <canvas id="wheelcanvas" width="500" height="500" onclick="spin();"></canvas>
</div>

<!-- Subject Modal End -->

<!-- Challenge Modal Start -->

<div class="modal fade" id="select_wager_prize" style="background-color: lightblue;">
  <div class="modal-dialog">
    <div class="modal-content "
         style="width: 100%;
                 border: 2px solid darkblue;
                 margin-left: auto;
                 margin-right: auto;
                 margin-top: 15%;"
         aria-labelledby="select_wager_prizes"
         aria-hidden="true">
      <!--         data-backdrop="static"
               data-keyboard="false"   -->


      <!-- modal Content Start -->


      <div class="container">

        <div class="row">

          <div class="col-sm-3">
            <% if can_challenge %>
                <h3><%= current_user.name %></h3>
                <% wagerable_trophies = @game.get_wagerable_trophies(opponent_id) %>
                <% wagerable_trophies.each do |wager| %>
                    <% if wager == 'Art' %>

                    <% end %>

                    <% if wager == 'Entertainment' %>

                    <% end %>

                    <% if wager == 'History' %>

                    <% end %>

                    <% if wager == 'Geography' %>

                    <% end %>

                    <% if wager == 'Science' %>

                    <% end %>

                    <% if wager == 'Sports' %>

                    <% end %>
                <% end %>
                </div> <!-- column end  -->


                <div class="col-sm-3">   <!-- column 2 start -->
                  <h3><%= player2.name %></h3>


                  <% winnable_trophies = @game.get_winnable_trophies(opponent_id) %>
                  <% winnable_trophies.each do |prize| %>
                      <% if prize == 'Art' %>

                      <% end %>

                      <% if prize == 'Entertainment' %>

                      <% end %>

                      <% if prize == 'History' %>

                      <% end %>

                      <% if prize == 'Geography' %>

                      <% end %>

                      <% if prize == 'Science' %>

                      <% end %>

                      <% if prize == 'Sports' %>


                      <% end %>
                  <% end %>

            <% end %>

            <br/>
            </div>  <!-- Column 2 end -->
            </div>

      </div>
    </div>
    <!-- Row  -->
  </div>
  <!-- Container  -->
</div>
<!-- Modal Content -->

<!-- Challenge Modal End -->
<script>
    drawRouletteWheel()
</script>


</html>



<!-- Subject Modal Display -->

<% if question_type == 'Bonus' %>
    <% @game.update_attributes(:bonus => 'true') %>
    <% current_game.save! %>
    <script> $('#select_subject').modal('show') </script>
<% end %>

<% if current_game.bonus == 'true'  %>
    <script> $('#select_subject').modal('show') </script>
<% end %>



<!-- Challenge Modal End  -->


